{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{Qsjy:function(e,s,t){e.exports={hr:\"passwordreset_hr__3lTrD\",pageHeader:\"passwordreset_pageHeader__2KG7F\",pageContent:\"passwordreset_pageContent__2Emxn\",form:\"passwordreset_form__9-cX9\",row:\"passwordreset_row__20v_I\",reset:\"passwordreset_reset__2w3QU\",emailField:\"passwordreset_emailField__2z2eH\",send:\"passwordreset_send__3eSyj\",subLabel:\"passwordreset_subLabel__1fp-d\",dot:\"passwordreset_dot__3HhF_\",errorText:\"passwordreset_errorText__24BNg\"}},YzpR:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/password-reset\",function(){return t(\"ap0U\")}])},ap0U:function(e,s,t){\"use strict\";t.r(s);var a=t(\"o0o1\"),r=t.n(a),n=t(\"HaE+\"),o=t(\"wx14\"),i=t(\"1OyB\"),c=t(\"vuIU\"),l=t(\"JX7q\"),u=t(\"Ji7U\"),d=t(\"md7G\"),p=t(\"foSv\"),m=t(\"rePB\"),w=t(\"q1tI\"),f=t.n(w),h=t(\"b0oO\"),_=t(\"8Kt/\"),g=t.n(_),v=t(\"nOHt\"),y=t.n(v),b=(t(\"ibbH\"),t(\"kE1S\"),t(\"8lYe\")),N=t(\"Qsjy\"),k=t.n(N),S=f.a.createElement;function j(e){var s=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=Object(p.a)(e);if(s){var r=Object(p.a)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return Object(d.a)(this,t)}}var C=function(e){Object(u.a)(t,e);var s=j(t);function t(e){var a;return Object(i.a)(this,t),a=s.call(this,e),Object(m.a)(Object(l.a)(a),\"_processSubmission\",(function(){var e,s,t,r;if(event.preventDefault(),r=Object(l.a)(a),!(e=document.querySelector('input[name=\"email_address\"]')).checkValidity())return e.classList.add(\"invalid\"),!1;e.classList.remove(\"invalid\"),t=document.querySelector(\".js-submit\"),s=JSON.stringify({email_address:a.state.email_address}),t.disabled=!0,r.setState({working:!0}),fetch(\"https://gwpadmin.codewrangler.io/api/gwp/v1/password-reset-request\",{method:\"post\",body:s,headers:{\"Content-Type\":\"application/json\"}}).then((function(e){return e.json()})).then((function(e){setTimeout((function(s){if(t.disabled=!1,JSON.stringify(e).includes(\"error\"))return r.setState({error:e.message,working:!1}),!1;r.setState({email_address:\"\",confirmation:\"Check your email to complete the process.\",working:!1},(function(){}))}),1e3)}))})),Object(m.a)(Object(l.a)(a),\"_processReset\",(function(){if(event.preventDefault(),a.state.new_password.length<12)a.setState({error:{new_password:\"Minimum of 12 characters.\"}});else{if(a.state.new_password_confirm!==a.state.new_password)return a.setState({error:{new_password_confirm:\"Passwords do not match.\"}}),!1;var e,s,t;t=Object(l.a)(a),s=document.querySelector(\".js-reset\"),\"https://gwpadmin.codewrangler.io/api/gwp/v1/user-password-reset\",e=JSON.stringify({new_password:a.state.new_password,new_password_confirm:a.state.new_password_confirm,token:a.props.token}),s.disabled=!0,t.setState({working:!0}),fetch(\"https://gwpadmin.codewrangler.io/api/gwp/v1/user-password-reset\",{method:\"post\",body:e,headers:{\"Content-Type\":\"application/json\"}}).then((function(e){return e.json()})).then((function(e){setTimeout((function(a){if(s.disabled=!1,JSON.stringify(e).includes(\"error\"))return t.setState({error:{response:e.message},working:!1}),!1;t.setState({email_address:\"\",confirmation:\"Your password has been reset.\",working:!1},(function(){setTimeout((function(e){y.a.push(\"/\")}),1e3)}))}),1e3)}))}})),a.state={email_address:\"\",working:!1,confirmation:!1,new_password:\"\",new_password_confirm:\"\"},a.handleChange=a.handleChange.bind(Object(l.a)(a)),a}return Object(c.a)(t,[{key:\"componentDidMount\",value:function(){}},{key:\"handleChange\",value:function(e){var s=e.target.getAttribute(\"name\");this.setState(Object(m.a)({},s,e.target.value),(function(){}))}},{key:\"componentDidUpdate\",value:function(){var e=this.state.working,s=document.querySelector(\"html\");e?s.classList.add(\"working\"):s.classList.remove(\"working\")}},{key:\"_renderError\",value:function(e){if(this.state.error){var s=JSON.stringify(this.state.error);if(s.includes(\"new_password\")&&\"new_password\"==e)return S(f.a.Fragment,null,S(\"span\",{className:\"\".concat(k.a.errorText)},this.state.error.new_password));if(s.includes(\"new_password_confirm\")&&\"new_password_confirm\"==e)return S(f.a.Fragment,null,S(\"span\",{className:\"\".concat(k.a.errorText)},this.state.error.new_password_confirm));if(s.includes(\"response\")&&\"response\"==e)return S(f.a.Fragment,null,S(\"p\",null,S(\"span\",{className:\"\".concat(k.a.errorText)},this.state.error.response)))}}},{key:\"_renderContent\",value:function(){return 0==this.props.token?this._renderForm():this._renderPasswordForm()}},{key:\"_renderForm\",value:function(){return 0==this.state.confirmation?S(f.a.Fragment,null,S(\"div\",{className:\"row \".concat(k.a.pageHeader,\" text-center\")},S(\"div\",{className:\"small-12 columns\"},S(\"h1\",null,\"Reset Your Password\"),S(\"img\",{className:k.a.hr,src:\"/images/sep.svg\",alt:\"\"}))),S(\"div\",{className:\"row \".concat(k.a.pageContent)},S(\"div\",{className:\"small-12 columns\"},S(\"form\",{className:k.a.form},S(\"div\",{className:\"input-group \".concat(k.a.reset)},S(\"input\",{className:\"input-group-field \".concat(k.a.emailField),onChange:this.handleChange,name:\"email_address\",value:this.state.email_address,type:\"email\",placeholder:\"Email Address\",required:!0}),S(\"div\",{className:\"input-group-button\"},S(\"input\",{onClick:this._processSubmission,type:\"submit\",className:\"js-submit button \".concat(k.a.searchButton),value:\"Send\"}))))))):S(f.a.Fragment,null,S(\"div\",{className:\"row \".concat(k.a.pageHeader,\" text-center\")},S(\"div\",{className:\"small-12 columns\"},S(\"h1\",null,\"Reset Your Password\"),S(\"img\",{className:k.a.hr,src:\"/images/sep.svg\",alt:\"\"}),S(\"p\",null,\"Submit your email address below and we will send you a confirmation email to reset your password. \"))),S(\"div\",{className:\"row \".concat(k.a.pageContent)},S(\"div\",{className:\"small-12 columns\"},S(\"div\",{className:k.a.form},S(\"h5\",{className:\"text-center\"},this.state.confirmation)))))}},{key:\"_renderPasswordForm\",value:function(){return 0==this.state.confirmation?S(f.a.Fragment,null,S(\"div\",{className:\"row \".concat(k.a.pageHeader,\" text-center\")},S(\"div\",{className:\"small-12 columns\"},S(\"h1\",null,\"Reset Your Password\"),S(\"img\",{className:k.a.hr,src:\"/images/sep.svg\",alt:\"\"}),S(\"p\",null,\"Set your new password using the form below.\"))),S(\"div\",{className:\"row \".concat(k.a.pageContent)},S(\"div\",{className:\"small-12 columns\"},S(\"form\",{className:k.a.form},S(\"div\",{className:\"\".concat(k.a.reset)},S(\"label\",null,\"New Password \",this._renderError(\"new_password\"),S(\"span\",{className:k.a.subLabel},S(\"span\",{className:k.a.dot},\"\\xb7\"),\" minimum of 10 characters\"),S(\"input\",{onChange:this.handleChange,name:\"new_password\",value:this.state.new_password,type:\"password\",placeholder:\"Type your password\",required:!0})),S(\"label\",null,\"Confim New Password \",this._renderError(\"new_password_confirm\"),S(\"input\",{onChange:this.handleChange,name:\"new_password_confirm\",value:this.state.new_password_confirm,type:\"password\",placeholder:\"Verify your password\",required:!0})),S(\"div\",{className:\"text-right \".concat(k.a.send)},this._renderError(\"response\"),S(\"input\",{onClick:this._processReset,type:\"submit\",className:\"text-right js-reset button\",value:\"Reset Password\"}))))))):S(f.a.Fragment,null,S(\"div\",{className:\"row \".concat(k.a.pageHeader,\" text-center\")},S(\"div\",{className:\"small-12 columns\"},S(\"h1\",null,\"Reset Your Password\"),S(\"img\",{className:k.a.hr,src:\"/images/sep.svg\",alt:\"\"}),S(\"p\",null,\"Set your new password using the form below.\"))),S(\"div\",{className:\"row \".concat(k.a.pageContent)},S(\"div\",{className:\"small-12 columns\"},S(\"div\",{className:k.a.form},S(\"h5\",{className:\"text-center\"},this.state.confirmation)))))}},{key:\"render\",value:function(){var e=this.props.display_name,s=this.props.user;return S(f.a.Fragment,null,S(g.a,null,S(\"title\",{key:\"page-title\"},\"Reset Password\"),S(\"meta\",{charset:\"utf-8\"}),S(\"link\",{rel:\"apple-touch-icon\",sizes:\"180x180\",href:\"/apple-touch-icon.png\"}),S(\"link\",{rel:\"icon\",type:\"image/png\",sizes:\"32x32\",href:\"/favicon-32x32.png\"}),S(\"link\",{rel:\"icon\",type:\"image/png\",sizes:\"16x16\",href:\"/favicon-16x16.png\"}),S(\"meta\",{name:\"msapplication-TileImage\",content:\"/favicon-270x270.png\"}),S(\"meta\",{name:\"msapplication-TileColor\",content:\"#ffffff\"}),S(\"link\",{rel:\"manifest\",href:\"/site.webmanifest\"})),S(h.a,Object(o.a)({},s,{display_name:e})),this._renderContent(),S(b.a,null))}}],[{key:\"getInitialProps\",value:function(){var e=Object(n.a)(r.a.mark((function e(s){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,s.query.token&&(t=s.query.token),e.abrupt(\"return\",{token:t});case 3:case\"end\":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}()}]),t}(f.a.Component);s.default=C}},[[\"YzpR\",0,2,1,3,4,5]]]);","extractedComments":[]}