{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Link from 'next/link';\nimport MenuLink from '../components/MenuLink';\nimport ProfileMenuLink from '../components/ProfileMenuLink';\nimport LoginModal from '../components/LoginModal';\nimport headerStyles from '../public/styles/modules/header.module.css';\nimport WordpressService from '../services/wordpress';\nimport Cookies from 'js-cookie';\n\nclass Header extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"_toggleMenu\", () => {\n      this.setState(state => ({\n        mobile_menu_open: !state.mobile_menu_open\n      }));\n    });\n\n    _defineProperty(this, \"_toggleUserProfileMenu\", () => {\n      this.setState(state => ({\n        user_profile_menu_open: !state.user_profile_menu_open\n      }));\n    });\n\n    _defineProperty(this, \"_toggleLogin\", () => {\n      this.setState(state => ({\n        login_open: !state.login_open\n      }));\n    });\n\n    _defineProperty(this, \"_handleEscape\", e => {\n      if (e.which == 27) {\n        this._toggleMenu();\n      }\n    });\n\n    _defineProperty(this, \"_handleClick\", e => {// console.log('click');\n      // this._toggleUserProfileMenu();\n    });\n\n    this.state = {\n      mobile_menu_open: false,\n      user_profile_menu_open: false,\n      login_open: false //display_name: ''\n\n    };\n  } // static async getInitialProps(ctx) {\n  // \tconst wordpress = new WordpressService\n  // \tconst post = await wordpress.fetchPost(ctx.query.post);\n  //\n  // \tconst user = wordpress.getUser();\n  // \treturn wordpress.pageProps('test', post)\n  // }\n  // async _fetchToken() {\n  // \tconst token = await window.localStorage.getItem('user');\n  // \treturn token;\n  // }\n  // async componentDidMount() {\n  // \tconst {access_token} = this.props;\n  // \tconst wordpress = new WordpressService\n  // \tconst user = await wordpress.getUser(access_token);\n  // \tthis.setState(state => ({\n  // \t\tdisplay_name: user.first_name + ' ' + user.last_name\n  // \t}));\n  // }\n\n\n  _logOut() {\n    event.preventDefault();\n    setTimeout(function (e) {\n      Cookies.remove('user');\n      window.location.href = '/';\n    }, 750);\n  }\n\n  _renderUserProfileMenu() {\n    if (this.state.user_profile_menu_open == false) {\n      return null;\n    } else {\n      return __jsx(\"ul\", {\n        id: \"header-profile-menu\",\n        className: `vertical menu ${headerStyles.menu} ${headerStyles.profileMenu} clearfix`\n      }, __jsx(\"li\", {\n        className: headerStyles.menuItem\n      }, __jsx(ProfileMenuLink, {\n        href: \"/profile\"\n      }, __jsx(\"a\", null, __jsx(\"img\", {\n        className: headerStyles.menuImage,\n        src: \"/images/profile-menu-profile.svg\",\n        alt: \"\"\n      }), __jsx(\"img\", {\n        className: `${headerStyles.menuImage} ${headerStyles.active}`,\n        src: \"/images/profile-menu-profile-active.svg\",\n        alt: \"\"\n      }), __jsx(\"span\", null, \"Dashboard\")))), __jsx(\"li\", {\n        className: headerStyles.menuItem\n      }, __jsx(ProfileMenuLink, {\n        href: \"/promote\"\n      }, __jsx(\"a\", null, __jsx(\"img\", {\n        className: headerStyles.menuImage,\n        src: \"/images/profile-menu-upgrade.svg\",\n        alt: \"\"\n      }), __jsx(\"img\", {\n        className: `${headerStyles.menuImage} ${headerStyles.active}`,\n        src: \"/images/profile-menu-upgrade-active.svg\",\n        alt: \"\"\n      }), __jsx(\"span\", null, \"Promote\")))), __jsx(\"li\", {\n        className: headerStyles.menuItem\n      }, __jsx(ProfileMenuLink, {\n        href: \"/contact\"\n      }, __jsx(\"a\", null, __jsx(\"img\", {\n        className: headerStyles.menuImage,\n        src: \"/images/profile-menu-contact.svg\",\n        alt: \"\"\n      }), __jsx(\"img\", {\n        className: `${headerStyles.menuImage} ${headerStyles.active}`,\n        src: \"/images/profile-menu-contact-active.svg\",\n        alt: \"\"\n      }), __jsx(\"span\", null, \"Contact\")))), __jsx(\"li\", {\n        className: headerStyles.menuItem\n      }, __jsx(ProfileMenuLink, {\n        href: \"/settings\"\n      }, __jsx(\"a\", null, __jsx(\"img\", {\n        className: headerStyles.menuImage,\n        src: \"/images/profile-menu-settings.svg\",\n        alt: \"\"\n      }), __jsx(\"img\", {\n        className: `${headerStyles.menuImage} ${headerStyles.active}`,\n        src: \"/images/profile-menu-settings-active.svg\",\n        alt: \"\"\n      }), __jsx(\"span\", null, \"Settings\")))), __jsx(\"li\", {\n        className: `${headerStyles.menuItem} ${headerStyles.logout}`\n      }, __jsx(\"a\", {\n        onClick: this._logOut\n      }, __jsx(\"img\", {\n        className: headerStyles.menuImage,\n        src: \"/images/log-out-profile-menu.svg\",\n        alt: \"\"\n      }), __jsx(\"span\", null, \"Log Out\"))));\n    }\n  }\n\n  componentDidUpdate() {// const {user_profile_menu_open} = this.state;\n    // if( user_profile_menu_open == true) {\n    // \twindow.addEventListener('click', this._handleClick );\n    // } else {\n    // \twindow.removeEventListener('click', this._handleClick );\n    // }\n  }\n\n  _renderUserMenuIcon() {\n    if (this.state.user_profile_menu_open == false) {\n      return __jsx(\"img\", {\n        src: \"/images/account-arrow.svg\",\n        alt: \"\"\n      });\n    } else {\n      return __jsx(\"img\", {\n        className: headerStyles.iconOpen,\n        src: \"/images/account-arrow.svg\",\n        alt: \"\"\n      });\n    }\n  }\n\n  _renderUserMenu() {\n    const {\n      user\n    } = this.props;\n    const display_name = this.props.display_name;\n\n    if (user !== false && user !== undefined) {\n      return __jsx(React.Fragment, null, __jsx(\"ul\", {\n        className: `${headerStyles.userMenu} clearfix`,\n        \"aria-expanded\": \"false\"\n      }, __jsx(\"li\", {\n        className: `menu-item ${headerStyles.search}`\n      }, __jsx(Link, {\n        href: \"/find\"\n      }, __jsx(\"a\", null, __jsx(\"img\", {\n        className: headerStyles.search,\n        src: \"/images/search.svg\",\n        alt: \"GovWhitePapers Search\"\n      })))), __jsx(\"li\", {\n        className: `js-account-menu menu-item ${headerStyles.account}`\n      }, __jsx(\"a\", {\n        onClick: this._toggleUserProfileMenu\n      }, display_name, \" \", this._renderUserMenuIcon()), this._renderUserProfileMenu())));\n    } else {\n      return __jsx(React.Fragment, null, __jsx(\"ul\", {\n        className: `${headerStyles.userMenu} clearfix`,\n        \"aria-expanded\": \"false\"\n      }, __jsx(\"li\", {\n        className: `menu-item ${headerStyles.search}`\n      }, __jsx(Link, {\n        href: \"/find\"\n      }, __jsx(\"a\", null, __jsx(\"img\", {\n        className: headerStyles.search,\n        src: \"/images/search.svg\",\n        alt: \"GovWhitePapers Search\"\n      })))), __jsx(\"li\", {\n        className: `js-account-menu menu-item ${headerStyles.login}`\n      }, __jsx(\"a\", {\n        onClick: this._toggleLogin,\n        className: `js-login ${headerStyles.login}`\n      }, \"Login\")), __jsx(\"li\", {\n        className: `menu-item ${headerStyles.getStarted}`\n      }, __jsx(Link, {\n        href: \"/register\"\n      }, __jsx(\"a\", {\n        className: `button ${headerStyles.button}`\n      }, \"Get started\")))));\n    }\n  }\n\n  render() {\n    return __jsx(React.Fragment, null, __jsx(\"header\", {\n      className: headerStyles.header\n    }, __jsx(\"div\", {\n      className: \"row\"\n    }, __jsx(\"div\", {\n      className: \"small-9 medium-10 large-8 columns\"\n    }, __jsx(Link, {\n      href: \"/\"\n    }, __jsx(\"a\", null, __jsx(\"img\", {\n      className: headerStyles.logo,\n      src: \"/images/logo.svg\",\n      alt: \"GovWhitePapers Logo\"\n    }))), __jsx(\"div\", {\n      className: headerStyles.navigationWrap\n    }, __jsx(\"nav\", {\n      id: \"site-navigation\",\n      className: this.state.mobile_menu_open == true ? `${headerStyles.mainNavigation} clearfix ${headerStyles.toggled}` : `${headerStyles.mainNavigation} clearfix`\n    }, __jsx(\"button\", {\n      onClick: this._toggleMenu,\n      className: headerStyles.menuToggle,\n      \"aria-controls\": \"primary-menu\",\n      \"aria-expanded\": \"false\"\n    }, __jsx(\"span\", {\n      className: \"screen-reader-text\"\n    }, \"Toggle Mobile Menu\"), __jsx(\"div\", {\n      id: \"burger\",\n      className: this.state.mobile_menu_open == true ? `${headerStyles.burger} ${headerStyles.open}` : `${headerStyles.burger}`\n    }, __jsx(\"span\", null), __jsx(\"span\", null), __jsx(\"span\", null))), __jsx(\"div\", {\n      className: `${headerStyles.menuPrimaryMenuContainer} clearfix`\n    }, __jsx(\"ul\", {\n      id: \"primary-menu\",\n      className: `menu ${headerStyles.menu} clearfix`,\n      \"aria-expanded\": \"false\"\n    }, __jsx(\"li\", {\n      className: `menu-item ${headerStyles.homeMenuLink}`\n    }, __jsx(MenuLink, {\n      href: \"/\"\n    }, __jsx(\"a\", null, __jsx(\"img\", {\n      className: headerStyles.menuImage,\n      src: \"/images/menu-home.png\",\n      alt: \"\"\n    }), \"Home\"))), __jsx(\"li\", {\n      className: \"menu-item\"\n    }, __jsx(MenuLink, {\n      href: \"/find\"\n    }, __jsx(\"a\", null, __jsx(\"img\", {\n      className: headerStyles.menuImage,\n      src: \"/images/menu-find.png\",\n      alt: \"\"\n    }), \"Find\"))), __jsx(\"li\", {\n      className: \"menu-item\"\n    }, __jsx(MenuLink, {\n      href: \"/post\"\n    }, __jsx(\"a\", null, __jsx(\"img\", {\n      className: headerStyles.menuImage,\n      src: \"/images/menu-post.png\",\n      alt: \"\"\n    }), \"Post\"))), __jsx(\"li\", {\n      className: \"menu-item\"\n    }, __jsx(MenuLink, {\n      href: \"/promote\"\n    }, __jsx(\"a\", null, __jsx(\"img\", {\n      className: `${headerStyles.menuImage} ${headerStyles.promote}`,\n      src: \"/images/menu-promote.png\",\n      alt: \"\"\n    }), \"Promote\"))), __jsx(\"li\", {\n      className: \"menu-item\"\n    }, __jsx(MenuLink, {\n      href: \"/about\"\n    }, __jsx(\"a\", null, __jsx(\"img\", {\n      className: headerStyles.menuImage,\n      src: \"/images/menu-about.png\",\n      alt: \"\"\n    }), \"About\"))), __jsx(\"li\", {\n      className: \"menu-item\"\n    }, __jsx(MenuLink, {\n      href: \"/team\"\n    }, __jsx(\"a\", null, __jsx(\"img\", {\n      className: `${headerStyles.menuImage} ${headerStyles.team}`,\n      src: \"/images/menu-team.png\",\n      alt: \"\"\n    }), \"Team\"))), __jsx(\"li\", {\n      className: \"menu-item\"\n    }, __jsx(MenuLink, {\n      href: \"/blog\"\n    }, __jsx(\"a\", null, __jsx(\"img\", {\n      className: `${headerStyles.menuImage} ${headerStyles.blog}`,\n      src: \"/images/menu-blog.png\",\n      alt: \"\"\n    }), \"Blog\"))), __jsx(\"li\", {\n      className: `menu-item ${headerStyles.eventsMenuLink}`\n    }, __jsx(\"a\", {\n      target: \"_blank\",\n      href: \"https://govevents.com\"\n    }, __jsx(\"img\", {\n      className: headerStyles.menuImage,\n      src: \"/images/menu-events.png\",\n      alt: \"\"\n    }), \"Go to GovEvents\"))), __jsx(\"div\", {\n      className: `${headerStyles.mobileUserMenuWrap} clearfix`\n    }, this._renderUserMenu()))))), __jsx(\"div\", {\n      className: \"small-3 medium-2 large-4 columns text-right\"\n    }, __jsx(\"div\", {\n      className: `${headerStyles.mainUserMenuWrap} clearfix`\n    }, this._renderUserMenu()))), __jsx(LoginModal, {\n      open: this.state.login_open,\n      toggle: () => this._toggleLogin()\n    })), __jsx(\"div\", {\n      id: \"ie-killa\"\n    }, __jsx(\"img\", {\n      src: \"/images/logo.svg\",\n      alt: \"GovWhitePapers Logo\"\n    }), __jsx(\"h3\", null, \"Sorry, your browser is not compatible with this application. Please use the latest version of Google Chrome/Chromium, Mozilla Firefox or Safari.\")));\n  }\n\n}\n\nexport default Header;","map":null,"metadata":{},"sourceType":"module"}