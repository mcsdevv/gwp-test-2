{"ast":null,"code":"var _jsxFileName = \"/home/edward/Projects/gov/gwp-test/pages/_app.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport '../public/styles/fonts.css';\nimport '../public/styles/foundation.css';\nimport '../public/styles/global.css';\nimport '../public/styles/datepicker.css';\nimport '../public/styles/ads.css';\nimport Cookies from 'js-cookie';\nimport App from \"next/app\";\nimport WordpressService from '../services/wordpress';\n\nclass GWP extends App {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: this._fetchToken(),\n      display_name: '',\n      organization_id: false\n    };\n    this.checkIE();\n  }\n\n  checkIE() {\n    if (false) {\n      var ua = window.navigator.userAgent;\n      var isIE = /MSIE|Edge|Trident/.test(ua);\n\n      if (isIE) {\n        document.querySelector('#ie-killa').classList.add('show');\n        document.querySelector('html').classList.add('ie-killa');\n      }\n    }\n  }\n\n  componentDidUpdate() {}\n\n  async componentDidMount() {\n    const access_token = this._fetchToken();\n\n    if (access_token) {\n      const wordpress = new WordpressService();\n      const user = await wordpress.getUser(access_token.access_token);\n      console.log('app user');\n      console.log(user);\n      this.setState(state => ({\n        display_name: user.first_name + ' ' + user.last_name,\n        organization_id: user.organization_id,\n        organization_email_verified: user.organization_email_verified,\n        organization_email_mismatch: user.organization_email_mismatch\n      }));\n    }\n  }\n\n  _fetchToken() {\n    let c = Cookies.get('user');\n\n    if (c) {\n      let d = c.replace('path=/', '');\n      const token = JSON.parse(d);\n      return token;\n    } // if (process.browser) {\n    // \tconst token = await window.localStorage.getItem('user');\n    // \treturn token;\n    // } else {\n    // \treturn false;\n    // }\n\n  }\n\n  render() {\n    const {\n      Component,\n      pageProps\n    } = this.props;\n    return __jsx(Component, _extends({}, pageProps, this.state, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 4\n      }\n    }));\n  }\n\n} // This default export is required in a new `pages/_app.js` file.\n\n\nexport default GWP;","map":{"version":3,"sources":["/home/edward/Projects/gov/gwp-test/pages/_app.js"],"names":["Cookies","App","WordpressService","GWP","constructor","props","state","user","_fetchToken","display_name","organization_id","checkIE","ua","window","navigator","userAgent","isIE","test","document","querySelector","classList","add","componentDidUpdate","componentDidMount","access_token","wordpress","getUser","console","log","setState","first_name","last_name","organization_email_verified","organization_email_mismatch","c","get","d","replace","token","JSON","parse","render","Component","pageProps"],"mappings":";;;;;;AAAA,OAAO,4BAAP;AACA,OAAO,iCAAP;AACA,OAAO,6BAAP;AACA,OAAO,iCAAP;AACA,OAAO,0BAAP;AACA,OAAOA,OAAP,MAAoB,WAApB;AACA,OAAOC,GAAP,MAAgB,UAAhB;AACA,OAAOC,gBAAP,MAA6B,uBAA7B;;AAEA,MAAMC,GAAN,SAAkBF,GAAlB,CAAsB;AACrBG,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAClB,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa;AACZC,MAAAA,IAAI,EAAE,KAAKC,WAAL,EADM;AAEZC,MAAAA,YAAY,EAAE,EAFF;AAGZC,MAAAA,eAAe,EAAE;AAHL,KAAb;AAMA,SAAKC,OAAL;AACA;;AAEDA,EAAAA,OAAO,GAAG;AACT,eAAsB;AACrB,UAAIC,EAAE,GAAGC,MAAM,CAACC,SAAP,CAAiBC,SAA1B;AACA,UAAIC,IAAI,GAAG,oBAAoBC,IAApB,CAAyBL,EAAzB,CAAX;;AAEA,UAAKI,IAAL,EAAY;AACXE,QAAAA,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoCC,SAApC,CAA8CC,GAA9C,CAAkD,MAAlD;AACAH,QAAAA,QAAQ,CAACC,aAAT,CAAuB,MAAvB,EAA+BC,SAA/B,CAAyCC,GAAzC,CAA6C,UAA7C;AACA;AACD;AACD;;AAEDC,EAAAA,kBAAkB,GAAG,CAEpB;;AAED,QAAMC,iBAAN,GAA0B;AACzB,UAAMC,YAAY,GAAG,KAAKhB,WAAL,EAArB;;AACA,QAAIgB,YAAJ,EAAmB;AAClB,YAAMC,SAAS,GAAG,IAAIvB,gBAAJ,EAAlB;AACA,YAAMK,IAAI,GAAG,MAAMkB,SAAS,CAACC,OAAV,CAAkBF,YAAY,CAACA,YAA/B,CAAnB;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYrB,IAAZ;AACA,WAAKsB,QAAL,CAAcvB,KAAK,KAAK;AACvBG,QAAAA,YAAY,EAAEF,IAAI,CAACuB,UAAL,GAAkB,GAAlB,GAAwBvB,IAAI,CAACwB,SADpB;AAEvBrB,QAAAA,eAAe,EAAEH,IAAI,CAACG,eAFC;AAGvBsB,QAAAA,2BAA2B,EAAEzB,IAAI,CAACyB,2BAHX;AAIvBC,QAAAA,2BAA2B,EAAE1B,IAAI,CAAC0B;AAJX,OAAL,CAAnB;AAMA;AACD;;AAIAzB,EAAAA,WAAW,GAAG;AACd,QAAI0B,CAAC,GAAGlC,OAAO,CAACmC,GAAR,CAAY,MAAZ,CAAR;;AACA,QAAID,CAAJ,EAAQ;AACP,UAAIE,CAAC,GAAGF,CAAC,CAACG,OAAF,CAAU,QAAV,EAAoB,EAApB,CAAR;AACA,YAAMC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWJ,CAAX,CAAd;AACA,aAAOE,KAAP;AACA,KANa,CAQd;AACA;AACA;AACA;AACA;AACA;;AACA;;AAEDG,EAAAA,MAAM,GAAG;AACR,UAAM;AAAEC,MAAAA,SAAF;AAAaC,MAAAA;AAAb,QAA2B,KAAKtC,KAAtC;AACA,WACC,MAAC,SAAD,eAAesC,SAAf,EAA8B,KAAKrC,KAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADD;AAGA;;AApEoB,C,CAsEtB;;;AACA,eAAeH,GAAf","sourcesContent":["import '../public/styles/fonts.css';\nimport '../public/styles/foundation.css';\nimport '../public/styles/global.css';\nimport '../public/styles/datepicker.css';\nimport '../public/styles/ads.css';\nimport Cookies from 'js-cookie'\nimport App from \"next/app\";\nimport WordpressService from '../services/wordpress'\n\nclass GWP extends App {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tuser: this._fetchToken(),\n\t\t\tdisplay_name: '',\n\t\t\torganization_id: false,\n\t\t}\n\n\t\tthis.checkIE();\n\t}\n\n\tcheckIE() {\n\t\tif( process.browser ) {\n\t\t\tvar ua = window.navigator.userAgent;\n\t\t\tvar isIE = /MSIE|Edge|Trident/.test(ua);\n\n\t\t\tif ( isIE ) {\n\t\t\t\tdocument.querySelector('#ie-killa').classList.add('show');\n\t\t\t\tdocument.querySelector('html').classList.add('ie-killa');\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentDidUpdate() {\n\n\t}\n\n\tasync componentDidMount() {\n\t\tconst access_token = this._fetchToken();\n\t\tif( access_token ) {\n\t\t\tconst wordpress = new WordpressService\n\t\t\tconst user = await wordpress.getUser(access_token.access_token);\n\t\t\tconsole.log('app user');\n\t\t\tconsole.log(user);\n\t\t\tthis.setState(state => ({\n\t\t\t\tdisplay_name: user.first_name + ' ' + user.last_name,\n\t\t\t\torganization_id: user.organization_id,\n\t\t\t\torganization_email_verified: user.organization_email_verified,\n\t\t\t\torganization_email_mismatch: user.organization_email_mismatch\n\t\t\t}));\n\t\t}\n\t}\n\n\n\n\t _fetchToken() {\n\t\tlet c = Cookies.get('user');\n\t\tif( c ) {\n\t\t\tlet d = c.replace('path=/', '');\n\t\t\tconst token = JSON.parse(d);\n\t\t\treturn token;\n\t\t}\n\n\t\t// if (process.browser) {\n\t\t// \tconst token = await window.localStorage.getItem('user');\n\t\t// \treturn token;\n\t\t// } else {\n\t\t// \treturn false;\n\t\t// }\n\t}\n\n\trender() {\n\t\tconst { Component, pageProps } = this.props;\n\t\treturn (\n\t\t\t<Component {...pageProps} {...this.state} />\n\t\t);\n\t}\n}\n// This default export is required in a new `pages/_app.js` file.\nexport default GWP;\n"]},"metadata":{},"sourceType":"module"}