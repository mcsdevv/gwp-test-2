{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Link from 'next/link';\nimport MenuLink from '../components/MenuLink';\nimport ProfileMenuLink from '../components/ProfileMenuLink';\nimport LoginModal from '../components/LoginModal';\nimport headerStyles from '../public/styles/modules/header.module.css';\nimport WordpressService from '../services/wordpress';\nimport Cookies from 'js-cookie';\n\nvar Header = /*#__PURE__*/function (_React$Component) {\n  _inherits(Header, _React$Component);\n\n  var _super = _createSuper(Header);\n\n  function Header(props) {\n    var _this;\n\n    _classCallCheck(this, Header);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"_toggleMenu\", function () {\n      _this.setState(function (state) {\n        return {\n          mobile_menu_open: !state.mobile_menu_open\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_toggleUserProfileMenu\", function () {\n      _this.setState(function (state) {\n        return {\n          user_profile_menu_open: !state.user_profile_menu_open\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_toggleLogin\", function () {\n      _this.setState(function (state) {\n        return {\n          login_open: !state.login_open\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_handleEscape\", function (e) {\n      if (e.which == 27) {\n        _this._toggleMenu();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_handleClick\", function (e) {// console.log('click');\n      // this._toggleUserProfileMenu();\n    });\n\n    _this.state = {\n      mobile_menu_open: false,\n      user_profile_menu_open: false,\n      login_open: false //display_name: ''\n\n    };\n    return _this;\n  } // static async getInitialProps(ctx) {\n  // \tconst wordpress = new WordpressService\n  // \tconst post = await wordpress.fetchPost(ctx.query.post);\n  //\n  // \tconst user = wordpress.getUser();\n  // \treturn wordpress.pageProps('test', post)\n  // }\n  // async _fetchToken() {\n  // \tconst token = await window.localStorage.getItem('user');\n  // \treturn token;\n  // }\n  // async componentDidMount() {\n  // \tconst {access_token} = this.props;\n  // \tconst wordpress = new WordpressService\n  // \tconst user = await wordpress.getUser(access_token);\n  // \tthis.setState(state => ({\n  // \t\tdisplay_name: user.first_name + ' ' + user.last_name\n  // \t}));\n  // }\n\n\n  _createClass(Header, [{\n    key: \"_logOut\",\n    value: function _logOut() {\n      event.preventDefault();\n      setTimeout(function (e) {\n        Cookies.remove('user');\n        window.location.href = '/';\n      }, 750);\n    }\n  }, {\n    key: \"_renderUserProfileMenu\",\n    value: function _renderUserProfileMenu() {\n      if (this.state.user_profile_menu_open == false) {\n        return null;\n      } else {\n        return __jsx(\"ul\", {\n          id: \"header-profile-menu\",\n          className: \"vertical menu \".concat(headerStyles.menu, \" \").concat(headerStyles.profileMenu, \" clearfix\")\n        }, __jsx(\"li\", {\n          className: headerStyles.menuItem\n        }, __jsx(ProfileMenuLink, {\n          href: \"/profile\"\n        }, __jsx(\"a\", null, __jsx(\"img\", {\n          className: headerStyles.menuImage,\n          src: \"/images/profile-menu-profile.svg\",\n          alt: \"\"\n        }), __jsx(\"img\", {\n          className: \"\".concat(headerStyles.menuImage, \" \").concat(headerStyles.active),\n          src: \"/images/profile-menu-profile-active.svg\",\n          alt: \"\"\n        }), __jsx(\"span\", null, \"Dashboard\")))), __jsx(\"li\", {\n          className: headerStyles.menuItem\n        }, __jsx(ProfileMenuLink, {\n          href: \"/promote\"\n        }, __jsx(\"a\", null, __jsx(\"img\", {\n          className: headerStyles.menuImage,\n          src: \"/images/profile-menu-upgrade.svg\",\n          alt: \"\"\n        }), __jsx(\"img\", {\n          className: \"\".concat(headerStyles.menuImage, \" \").concat(headerStyles.active),\n          src: \"/images/profile-menu-upgrade-active.svg\",\n          alt: \"\"\n        }), __jsx(\"span\", null, \"Promote\")))), __jsx(\"li\", {\n          className: headerStyles.menuItem\n        }, __jsx(ProfileMenuLink, {\n          href: \"/contact\"\n        }, __jsx(\"a\", null, __jsx(\"img\", {\n          className: headerStyles.menuImage,\n          src: \"/images/profile-menu-contact.svg\",\n          alt: \"\"\n        }), __jsx(\"img\", {\n          className: \"\".concat(headerStyles.menuImage, \" \").concat(headerStyles.active),\n          src: \"/images/profile-menu-contact-active.svg\",\n          alt: \"\"\n        }), __jsx(\"span\", null, \"Contact\")))), __jsx(\"li\", {\n          className: headerStyles.menuItem\n        }, __jsx(ProfileMenuLink, {\n          href: \"/settings\"\n        }, __jsx(\"a\", null, __jsx(\"img\", {\n          className: headerStyles.menuImage,\n          src: \"/images/profile-menu-settings.svg\",\n          alt: \"\"\n        }), __jsx(\"img\", {\n          className: \"\".concat(headerStyles.menuImage, \" \").concat(headerStyles.active),\n          src: \"/images/profile-menu-settings-active.svg\",\n          alt: \"\"\n        }), __jsx(\"span\", null, \"Settings\")))), __jsx(\"li\", {\n          className: \"\".concat(headerStyles.menuItem, \" \").concat(headerStyles.logout)\n        }, __jsx(\"a\", {\n          onClick: this._logOut\n        }, __jsx(\"img\", {\n          className: headerStyles.menuImage,\n          src: \"/images/log-out-profile-menu.svg\",\n          alt: \"\"\n        }), __jsx(\"span\", null, \"Log Out\"))));\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {// const {user_profile_menu_open} = this.state;\n      // if( user_profile_menu_open == true) {\n      // \twindow.addEventListener('click', this._handleClick );\n      // } else {\n      // \twindow.removeEventListener('click', this._handleClick );\n      // }\n    }\n  }, {\n    key: \"_renderUserMenuIcon\",\n    value: function _renderUserMenuIcon() {\n      if (this.state.user_profile_menu_open == false) {\n        return __jsx(\"img\", {\n          src: \"/images/account-arrow.svg\",\n          alt: \"\"\n        });\n      } else {\n        return __jsx(\"img\", {\n          className: headerStyles.iconOpen,\n          src: \"/images/account-arrow.svg\",\n          alt: \"\"\n        });\n      }\n    }\n  }, {\n    key: \"_renderUserMenu\",\n    value: function _renderUserMenu() {\n      var user = this.props.user;\n      var display_name = this.props.display_name;\n\n      if (user !== false && user !== undefined) {\n        return __jsx(React.Fragment, null, __jsx(\"ul\", {\n          className: \"\".concat(headerStyles.userMenu, \" clearfix\"),\n          \"aria-expanded\": \"false\"\n        }, __jsx(\"li\", {\n          className: \"menu-item \".concat(headerStyles.search)\n        }, __jsx(Link, {\n          href: \"/find\"\n        }, __jsx(\"a\", null, __jsx(\"img\", {\n          className: headerStyles.search,\n          src: \"/images/search.svg\",\n          alt: \"GovWhitePapers Search\"\n        })))), __jsx(\"li\", {\n          className: \"js-account-menu menu-item \".concat(headerStyles.account)\n        }, __jsx(\"a\", {\n          onClick: this._toggleUserProfileMenu\n        }, display_name, \" \", this._renderUserMenuIcon()), this._renderUserProfileMenu())));\n      } else {\n        return __jsx(React.Fragment, null, __jsx(\"ul\", {\n          className: \"\".concat(headerStyles.userMenu, \" clearfix\"),\n          \"aria-expanded\": \"false\"\n        }, __jsx(\"li\", {\n          className: \"menu-item \".concat(headerStyles.search)\n        }, __jsx(Link, {\n          href: \"/find\"\n        }, __jsx(\"a\", null, __jsx(\"img\", {\n          className: headerStyles.search,\n          src: \"/images/search.svg\",\n          alt: \"GovWhitePapers Search\"\n        })))), __jsx(\"li\", {\n          className: \"js-account-menu menu-item \".concat(headerStyles.login)\n        }, __jsx(\"a\", {\n          onClick: this._toggleLogin,\n          className: \"js-login \".concat(headerStyles.login)\n        }, \"Login\")), __jsx(\"li\", {\n          className: \"menu-item \".concat(headerStyles.getStarted)\n        }, __jsx(Link, {\n          href: \"/register\"\n        }, __jsx(\"a\", {\n          className: \"button \".concat(headerStyles.button)\n        }, \"Get started\")))));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return __jsx(React.Fragment, null, __jsx(\"header\", {\n        className: headerStyles.header\n      }, __jsx(\"div\", {\n        className: \"row\"\n      }, __jsx(\"div\", {\n        className: \"small-9 medium-10 large-8 columns\"\n      }, __jsx(Link, {\n        href: \"/\"\n      }, __jsx(\"a\", null, __jsx(\"img\", {\n        className: headerStyles.logo,\n        src: \"/images/logo.svg\",\n        alt: \"GovWhitePapers Logo\"\n      }))), __jsx(\"div\", {\n        className: headerStyles.navigationWrap\n      }, __jsx(\"nav\", {\n        id: \"site-navigation\",\n        className: this.state.mobile_menu_open == true ? \"\".concat(headerStyles.mainNavigation, \" clearfix \").concat(headerStyles.toggled) : \"\".concat(headerStyles.mainNavigation, \" clearfix\")\n      }, __jsx(\"button\", {\n        onClick: this._toggleMenu,\n        className: headerStyles.menuToggle,\n        \"aria-controls\": \"primary-menu\",\n        \"aria-expanded\": \"false\"\n      }, __jsx(\"span\", {\n        className: \"screen-reader-text\"\n      }, \"Toggle Mobile Menu\"), __jsx(\"div\", {\n        id: \"burger\",\n        className: this.state.mobile_menu_open == true ? \"\".concat(headerStyles.burger, \" \").concat(headerStyles.open) : \"\".concat(headerStyles.burger)\n      }, __jsx(\"span\", null), __jsx(\"span\", null), __jsx(\"span\", null))), __jsx(\"div\", {\n        className: \"\".concat(headerStyles.menuPrimaryMenuContainer, \" clearfix\")\n      }, __jsx(\"ul\", {\n        id: \"primary-menu\",\n        className: \"menu \".concat(headerStyles.menu, \" clearfix\"),\n        \"aria-expanded\": \"false\"\n      }, __jsx(\"li\", {\n        className: \"menu-item \".concat(headerStyles.homeMenuLink)\n      }, __jsx(MenuLink, {\n        href: \"/\"\n      }, __jsx(\"a\", null, __jsx(\"img\", {\n        className: headerStyles.menuImage,\n        src: \"/images/menu-home.png\",\n        alt: \"\"\n      }), \"Home\"))), __jsx(\"li\", {\n        className: \"menu-item\"\n      }, __jsx(MenuLink, {\n        href: \"/find\"\n      }, __jsx(\"a\", null, __jsx(\"img\", {\n        className: headerStyles.menuImage,\n        src: \"/images/menu-find.png\",\n        alt: \"\"\n      }), \"Find\"))), __jsx(\"li\", {\n        className: \"menu-item\"\n      }, __jsx(MenuLink, {\n        href: \"/post\"\n      }, __jsx(\"a\", null, __jsx(\"img\", {\n        className: headerStyles.menuImage,\n        src: \"/images/menu-post.png\",\n        alt: \"\"\n      }), \"Post\"))), __jsx(\"li\", {\n        className: \"menu-item\"\n      }, __jsx(MenuLink, {\n        href: \"/promote\"\n      }, __jsx(\"a\", null, __jsx(\"img\", {\n        className: \"\".concat(headerStyles.menuImage, \" \").concat(headerStyles.promote),\n        src: \"/images/menu-promote.png\",\n        alt: \"\"\n      }), \"Promote\"))), __jsx(\"li\", {\n        className: \"menu-item\"\n      }, __jsx(MenuLink, {\n        href: \"/about\"\n      }, __jsx(\"a\", null, __jsx(\"img\", {\n        className: headerStyles.menuImage,\n        src: \"/images/menu-about.png\",\n        alt: \"\"\n      }), \"About\"))), __jsx(\"li\", {\n        className: \"menu-item\"\n      }, __jsx(MenuLink, {\n        href: \"/team\"\n      }, __jsx(\"a\", null, __jsx(\"img\", {\n        className: \"\".concat(headerStyles.menuImage, \" \").concat(headerStyles.team),\n        src: \"/images/menu-team.png\",\n        alt: \"\"\n      }), \"Team\"))), __jsx(\"li\", {\n        className: \"menu-item\"\n      }, __jsx(MenuLink, {\n        href: \"/blog\"\n      }, __jsx(\"a\", null, __jsx(\"img\", {\n        className: \"\".concat(headerStyles.menuImage, \" \").concat(headerStyles.blog),\n        src: \"/images/menu-blog.png\",\n        alt: \"\"\n      }), \"Blog\"))), __jsx(\"li\", {\n        className: \"menu-item \".concat(headerStyles.eventsMenuLink)\n      }, __jsx(\"a\", {\n        target: \"_blank\",\n        href: \"https://govevents.com\"\n      }, __jsx(\"img\", {\n        className: headerStyles.menuImage,\n        src: \"/images/menu-events.png\",\n        alt: \"\"\n      }), \"Go to GovEvents\"))), __jsx(\"div\", {\n        className: \"\".concat(headerStyles.mobileUserMenuWrap, \" clearfix\")\n      }, this._renderUserMenu()))))), __jsx(\"div\", {\n        className: \"small-3 medium-2 large-4 columns text-right\"\n      }, __jsx(\"div\", {\n        className: \"\".concat(headerStyles.mainUserMenuWrap, \" clearfix\")\n      }, this._renderUserMenu()))), __jsx(LoginModal, {\n        open: this.state.login_open,\n        toggle: function toggle() {\n          return _this2._toggleLogin();\n        }\n      })), __jsx(\"div\", {\n        id: \"ie-killa\"\n      }, __jsx(\"img\", {\n        src: \"/images/logo.svg\",\n        alt: \"GovWhitePapers Logo\"\n      }), __jsx(\"h3\", null, \"Sorry, your browser is not compatible with this application. Please use the latest version of Google Chrome/Chromium, Mozilla Firefox or Safari.\")));\n    }\n  }]);\n\n  return Header;\n}(React.Component);\n\nexport default Header;","map":null,"metadata":{},"sourceType":"module"}