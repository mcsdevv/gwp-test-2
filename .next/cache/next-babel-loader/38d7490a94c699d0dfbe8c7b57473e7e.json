{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport WordpressService from '../services/wordpress';\nimport Link from 'next/link';\nimport Head from 'next/head';\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport ProfileSidebar from '../components/ProfileSidebar';\nimport profileStyles from '../public/styles/modules/profile.module.css';\nimport SavedSearchCard from '../components/SavedSearchCard';\n\nclass SavedSearches extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"_renderNoResults\", () => {\n      if (this.state.no_results) {\n        return __jsx(\"div\", {\n          className: profileStyles.noResults\n        }, __jsx(\"h4\", {\n          className: \"text-center\"\n        }, \"No saved searches.\"));\n      } else {\n        return null;\n      }\n    });\n\n    this.state = {\n      saved_searches: [],\n      topics: [],\n      tags: [],\n      formats: [],\n      agencies: [],\n      working: false,\n      no_results: false\n    };\n  }\n\n  async componentDidMount() {\n    if (!this.props.user) {\n      Router.push('/login');\n      return false;\n    }\n\n    const {\n      user\n    } = this.props;\n    const wordpress = new WordpressService();\n    const {\n      access_token\n    } = this.props.user;\n    const user_id = this.props.user.user.ID;\n    const saved_searches = await wordpress.fetchSavedSearches(user_id, access_token);\n    const topics = await wordpress.fetchTopics();\n    const tags = await wordpress.fetchTags();\n    const formats = await wordpress.fetchFormats();\n    const agencies = await wordpress.fetchAgencies('');\n    this.setState({\n      saved_searches: saved_searches,\n      topics: topics,\n      tags: tags,\n      formats: formats,\n      agencies: agencies\n    }, () => {\n      if (this.state.saved_searches.length < 1) {\n        this.setState(state => ({\n          no_results: true\n        }));\n      }\n    });\n  }\n\n  componentDidUpdate() {//console.log(this.state);\n  }\n\n  render() {\n    const display_name = this.props.display_name;\n    const {\n      user\n    } = this.props;\n    const {\n      saved_searches\n    } = this.state;\n    const {\n      topics\n    } = this.state;\n    const {\n      tags\n    } = this.state;\n    const {\n      formats\n    } = this.state;\n    const {\n      agencies\n    } = this.state;\n    return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", {\n      key: \"page-title\"\n    }, \"Saved Searches\"), __jsx(\"meta\", {\n      charset: \"utf-8\"\n    }), __jsx(\"link\", {\n      rel: \"apple-touch-icon\",\n      sizes: \"180x180\",\n      href: \"/apple-touch-icon.png\"\n    }), __jsx(\"link\", {\n      rel: \"icon\",\n      type: \"image/png\",\n      sizes: \"32x32\",\n      href: \"/favicon-32x32.png\"\n    }), __jsx(\"link\", {\n      rel: \"icon\",\n      type: \"image/png\",\n      sizes: \"16x16\",\n      href: \"/favicon-16x16.png\"\n    }), __jsx(\"meta\", {\n      name: \"msapplication-TileImage\",\n      content: \"/favicon-270x270.png\"\n    }), __jsx(\"meta\", {\n      name: \"msapplication-TileColor\",\n      content: \"#ffffff\"\n    }), __jsx(\"link\", {\n      rel: \"manifest\",\n      href: \"/site.webmanifest\"\n    })), __jsx(Header, _extends({}, user, {\n      display_name: display_name\n    })), __jsx(\"div\", {\n      className: `row ${profileStyles.pageContent}`\n    }, __jsx(\"div\", {\n      className: `small-12 medium-4 xlarge-3 columns`\n    }, __jsx(ProfileSidebar, {\n      organization_id: this.props.organization_id,\n      organization_email_mismatch: this.props.organization_email_mismatch,\n      organization_email_verified: this.props.organization_email_verified\n    })), __jsx(\"div\", {\n      className: `small-12 medium-8 xlarge-9 columns ${profileStyles.content}`\n    }, __jsx(\"div\", {\n      className: profileStyles.heading\n    }, __jsx(\"h2\", null, \"Saved Searches\")), __jsx(\"div\", {\n      className: \"small-up-1 clearfix\"\n    }, this._renderNoResults(), saved_searches.map((search, index) => __jsx(\"div\", {\n      key: index,\n      className: `column column-block`\n    }, __jsx(SavedSearchCard, {\n      access_token: this.props.user.access_token,\n      id: search.ID,\n      name: search.name,\n      topics: topics,\n      tags: tags,\n      formats: formats,\n      agencies: agencies,\n      selected_topics: search.selected_topics,\n      selected_tags: search.selected_tags,\n      selected_format: search.selected_format,\n      selected_agencies: search.selected_agencies,\n      start_date: search.start_date,\n      end_date: search.end_date\n    })))))), __jsx(Footer, null));\n  }\n\n}\n\nexport default SavedSearches;","map":null,"metadata":{},"sourceType":"module"}