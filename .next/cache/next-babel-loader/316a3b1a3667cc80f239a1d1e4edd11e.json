{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport ContactPublisherModalStyles from '../public/styles/modules/components/contactpublishermodalstyles.module.css';\nimport Link from 'next/link';\n\nvar ContactPublisherModal = /*#__PURE__*/function (_React$Component) {\n  _inherits(ContactPublisherModal, _React$Component);\n\n  var _super = _createSuper(ContactPublisherModal);\n\n  function ContactPublisherModal(props) {\n    var _this$state;\n\n    var _this;\n\n    _classCallCheck(this, ContactPublisherModal);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"_processSubmission\", function () {\n      event.preventDefault();\n      var firstNameField, lastNameField, emailAddressField, messageField, url, json, button, component;\n      component = _assertThisInitialized(_this);\n      firstNameField = document.querySelector('input[name=\"first_name\"]');\n      lastNameField = document.querySelector('input[name=\"last_name\"]');\n      emailAddressField = document.querySelector('input[name=\"email_address\"]');\n      messageField = document.querySelector('textarea[name=\"message\"]');\n\n      if (!firstNameField.checkValidity()) {\n        firstNameField.classList.add('invalid');\n        return false;\n      } else {\n        firstNameField.classList.remove('invalid');\n      }\n\n      if (!lastNameField.checkValidity()) {\n        lastNameField.classList.add('invalid');\n        return false;\n      } else {\n        lastNameField.classList.remove('invalid');\n      }\n\n      if (!emailAddressField.checkValidity()) {\n        emailAddressField.classList.add('invalid');\n        return false;\n      } else {\n        emailAddressField.classList.remove('invalid');\n      }\n\n      if (!messageField.checkValidity()) {\n        messageField.classList.add('invalid');\n        return false;\n      } else {\n        messageField.classList.remove('invalid');\n      }\n\n      button = document.querySelector('.js-submit');\n      url = 'https://gwpadmin.codewrangler.io/api/gwp/v1/publisher-contact';\n      json = JSON.stringify({\n        \"first_name\": _this.state.first_name,\n        \"last_name\": _this.state.last_name,\n        \"email_address\": _this.state.email_address,\n        \"organization\": _this.state.organization,\n        \"phone_number\": _this.state.phone_number,\n        \"message\": _this.state.message,\n        \"whitepaper_id\": _this.props.whitepaper_id\n      });\n      button.disabled = true;\n      component.setState({\n        working: true\n      });\n      fetch(url, {\n        method: 'post',\n        body: json,\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        setTimeout(function (e) {\n          button.disabled = false;\n          var flat = JSON.stringify(data);\n\n          if (flat.includes('error')) {\n            component.setState({\n              error: data.message,\n              working: false\n            });\n            return false;\n          }\n\n          component.setState({\n            first_name: '',\n            last_name: '',\n            email_address: '',\n            phone_number: '',\n            organization: '',\n            message: '',\n            working: false,\n            confirmation: 'Your message has been sent.'\n          }, function () {// Redirect to profile\n            //Router.push('/dashboard')\n          });\n        }, 1000);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_handleEscape\", function (e) {\n      if (e.which == 27) {\n        _this.props.toggle();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_handleClick\", function (e) {\n      e.preventDefault();\n\n      if (e.target.hasAttribute('data-close-modal')) {\n        _this.props.toggle();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_renderModalClass\", function () {\n      var open = _this.props.open;\n\n      if (open) {\n        return \"\".concat(ContactPublisherModalStyles.wrap, \" \").concat(ContactPublisherModalStyles.open);\n      } else {\n        return \"\".concat(ContactPublisherModalStyles.wrap);\n      }\n    });\n\n    _this.state = (_this$state = {\n      first_name: '',\n      last_name: '',\n      email_address: '',\n      phone_number: '',\n      message: '',\n      organization: ''\n    }, _defineProperty(_this$state, \"message\", ''), _defineProperty(_this$state, \"confirmation\", false), _defineProperty(_this$state, \"error\", ''), _defineProperty(_this$state, \"working\", false), _this$state);\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(ContactPublisherModal, [{\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      var name = event.target.getAttribute('name');\n      this.setState(_defineProperty({}, name, event.target.value));\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var open = this.props.open;\n      var working = this.state.working;\n      var html = document.querySelector('html');\n\n      if (open) {\n        window.addEventListener('keydown', this._handleEscape);\n        window.addEventListener('click', this._handleClick);\n        html.classList.add('active-modal');\n      } else {\n        window.removeEventListener('keydown', this._handleEscape);\n        window.removeEventListener('click', this._handleClick);\n        html.classList.remove('active-modal');\n      }\n\n      if (working) {\n        html.classList.add('working');\n      } else {\n        html.classList.remove('working');\n      }\n    }\n  }, {\n    key: \"_renderForm\",\n    value: function _renderForm() {\n      if (this.state.confirmation == false) {\n        return __jsx(\"form\", null, __jsx(\"label\", null, \"First Name\", __jsx(\"input\", {\n          onChange: this.handleChange,\n          name: \"first_name\",\n          value: this.state.first_name,\n          type: \"text\",\n          placeholder: \"First Name\",\n          required: true\n        })), __jsx(\"label\", null, \"Last Name\", __jsx(\"input\", {\n          onChange: this.handleChange,\n          name: \"last_name\",\n          value: this.state.last_name,\n          type: \"text\",\n          placeholder: \"Last Name\",\n          required: true\n        })), __jsx(\"label\", null, \"Email\", __jsx(\"input\", {\n          onChange: this.handleChange,\n          name: \"email_address\",\n          value: this.state.email_address,\n          type: \"email\",\n          placeholder: \"Email Address\",\n          required: true\n        })), __jsx(\"label\", null, \"Phone\", __jsx(\"input\", {\n          onChange: this.handleChange,\n          name: \"phone_number\",\n          value: this.state.phone_number,\n          type: \"tel\",\n          placeholder: \"e.g. 323-555-0124\"\n        })), __jsx(\"label\", null, \"Agency/Organization\", __jsx(\"input\", {\n          onChange: this.handleChange,\n          name: \"organization\",\n          value: this.state.organization,\n          type: \"text\",\n          placeholder: \"Organization name\",\n          required: true\n        })), __jsx(\"label\", null, \"Message\", __jsx(\"textarea\", {\n          onChange: this.handleChange,\n          value: this.state.message,\n          name: \"message\",\n          placeholder: \"Type your message...\",\n          rows: \"5\"\n        })), __jsx(\"div\", {\n          className: \"row \".concat(ContactPublisherModalStyles.signin)\n        }, __jsx(\"div\", {\n          className: \"small-12 columns text-center\"\n        }, __jsx(\"input\", {\n          onClick: this._processSubmission,\n          type: \"submit\",\n          className: \"js-submit button\",\n          value: \"Send\"\n        }))));\n      } else {\n        return __jsx(\"h5\", {\n          className: \"text-center\"\n        }, this.state.confirmation);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          email = _this$state2.email,\n          pass = _this$state2.pass,\n          error = _this$state2.error;\n      return __jsx(React.Fragment, null, __jsx(\"div\", {\n        className: this._renderModalClass()\n      }, __jsx(\"div\", {\n        className: \"row \".concat(ContactPublisherModalStyles.header)\n      }, __jsx(\"div\", {\n        className: \"small-6 columns\"\n      }, __jsx(\"img\", {\n        className: ContactPublisherModalStyles.logo,\n        src: \"/images/logo.svg\",\n        alt: \"\"\n      })), __jsx(\"div\", {\n        className: \"small-6 columns text-right\"\n      }, __jsx(\"button\", {\n        className: ContactPublisherModalStyles.close,\n        onClick: function onClick(e) {\n          _this2.props.toggle();\n        }\n      }, __jsx(\"img\", {\n        src: \"/images/close.svg\",\n        alt: \"\"\n      })))), __jsx(\"div\", {\n        className: \"text-center\"\n      }, __jsx(\"div\", {\n        className: \"small-12 columns\"\n      }, __jsx(\"h2\", null, \"Contact Publisher\"), __jsx(\"img\", {\n        className: ContactPublisherModalStyles.hr,\n        src: \"/images/sep.svg\",\n        alt: \"\"\n      }))), __jsx(\"div\", {\n        className: \"\".concat(ContactPublisherModalStyles.form)\n      }, __jsx(\"div\", {\n        className: \"row\"\n      }, __jsx(\"div\", {\n        className: \"small-12 columns\"\n      }, this._renderForm())))));\n    }\n  }]);\n\n  return ContactPublisherModal;\n}(React.Component);\n\nexport default ContactPublisherModal;","map":null,"metadata":{},"sourceType":"module"}