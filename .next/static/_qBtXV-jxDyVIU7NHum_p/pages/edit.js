(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{Mkwu:function(e,t,a){e.exports={hr:"post_hr__y1P6m",pageHeader:"post_pageHeader__3LIJL",pageContent:"post_pageContent__nzjVM",controls:"post_controls__-B5rv",icon:"post_icon__1am9g",tabs:"post_tabs__1Lw8N",tab:"post_tab__1lYYE",open:"post_open__mHJvX",form:"post_form__tYhlP",row:"post_row__kU_qi",addAuthor:"post_addAuthor__v6_ba",authorBlock:"post_authorBlock__3OFBP",authorWrap:"post_authorWrap__3cZES",deleteAuthor:"post_deleteAuthor__29rXy",addFile:"post_addFile__32dOI",addPhoto:"post_addPhoto__2IGx9",dateBlock:"post_dateBlock__3Uodw",cal:"post_cal__Awd3S",agree:"post_agree__1ptCY",label:"post_label__1W0bf",checkmark:"post_checkmark__18cKA",externalLink:"post_externalLink__Bvw7j",line:"post_line__1oUBI",copyright:"post_copyright__2PWsk",nav:"post_nav__3iumH",button:"post_button__15wTE",errorText:"post_errorText__3ZDLZ",question:"post_question__1aWiC",subLabel:"post_subLabel__1u-2J",dot:"post_dot__LzQtx",signin:"post_signin__esJzz",agency:"post_agency__2O15-",agencyTypeSelector:"post_agencyTypeSelector__YWAQ2",active:"post_active__18IZq",agencySelector:"post_agencySelector__17NiQ",agencyWrap:"post_agencyWrap__3ZvXg",relevant:"post_relevant__1I3mW",topics:"post_topics__2PyTK",selectedTopic:"post_selectedTopic__1SJOw",close:"post_close__2EUE9",tags:"post_tags__2R4LL",selectedTag:"post_selectedTag__2q-iY",tooltip:"post_tooltip__18pzg",tooltipText:"post_tooltipText__3WX5c",removeImage:"post_removeImage__3CAuz"}},oFpz:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/edit",function(){return a("p8II")}])},p8II:function(e,t,a){"use strict";a.r(t);var n=a("wx14"),r=a("o0o1"),s=a.n(r),i=a("HaE+"),o=a("1OyB"),c=a("vuIU"),l=a("JX7q"),u=a("Ji7U"),d=a("md7G"),m=a("foSv"),p=a("rePB"),h=a("q1tI"),_=a.n(h),g=a("nOHt"),f=a.n(g),b=a("8Kt/"),v=a.n(b),y=a("vcXL"),k=a.n(y),N=(a("YFqc"),a("ibbH")),S=a("kE1S"),w=a("b0oO"),x=a("8lYe"),C=a("Mkwu"),T=a.n(C),O=a("NRhA"),j=a.n(O),I=_.a.createElement;function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(m.a)(e);if(t){var r=Object(m.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(d.a)(this,a)}}var P=function(e){Object(u.a)(a,e);var t=A(a);function a(e){var n;return Object(o.a)(this,a),n=t.call(this,e),Object(p.a)(Object(l.a)(n),"_saveDraft",(function(){var e,t,a,r=n.props.user.access_token;if(e=Object(l.a)(n),!r)return!1;a=Math.round(n.state.publication_date.getTime()/1e3),t=JSON.stringify({title:n.state.title,ID:n.state.ID,authors:n.state.authors,format:parseInt(n.state.format),attachment_id:n.state.attachment_id,attachment_filename:n.state.attachment_filename,content_link:n.state.content_link,publication_date:a,description:n.state.description,copyright_notice:n.state.copyright_notice,image_id:n.state.image_id,image_filename:n.state.image_filename,image_url:n.state.image_url,agency_specific:n.state.agency_specific,agency_parent:n.state.agency_parent,agency_child:n.state.agency_child,available_agencies:n.state.available_agencies,selected_topics:n.state.selected_topics,selected_tags:n.state.selected_tags,relevant:n.state.relevant,first_name:n.state.first_name,last_name:n.state.last_name,email_address:n.state.email_address,phone_number:n.state.phone_number,access_token:r}),k()("https://gwpadmin.codewrangler.io/api/gwp/v1/save-whitepaper-draft",{method:"post",body:t,headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){if(JSON.stringify(t).includes("error"))return alert("Something went wrong"),window.location.reload(),!1;e.setState({ID:t.ID})}))})),Object(p.a)(Object(l.a)(n),"_handlePublish",(function(){var e,t,a;if(event.preventDefault(),e=document.querySelector(".js-publish"),t=Object(l.a)(n),n.state.first_name.length<1){var r=document.querySelector('input[name="first_name"]');return n.setState({error:{first_name:"Must include a first name"}}),r.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),!1}if(n.state.last_name.length<1){var s=document.querySelector('input[name="last_name"]');return n.setState({error:{last_name:"Must include a last name"}}),s.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),!1}var i=document.querySelector('input[name="email_address"]');if(!i.checkValidity())return n.setState({error:{email_address:"Must include your email"}}),i.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),!1;if(n.state.phone_number.length<1){var o=document.querySelector('input[name="phone_number"]');return n.setState({error:{phone_number:"Must include a contact phone number"}}),o.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),!1}var c=n.props.user.access_token;if(!c)return!1;var u=Math.round(n.state.publication_date.getTime()/1e3);a=JSON.stringify({title:n.state.title,ID:n.state.ID,authors:n.state.authors,format:parseInt(n.state.format),attachment_id:n.state.attachment_id,attachment_filename:n.state.attachment_filename,content_link:n.state.content_link,publication_date:u,description:n.state.description,copyright_notice:n.state.copyright_notice,image_id:n.state.image_id,image_filename:n.state.image_filename,image_url:n.state.image_url,agency_specific:n.state.agency_specific,agency_parent:n.state.agency_parent,agency_child:n.state.agency_child,available_agencies:n.state.available_agencies,selected_topics:n.state.selected_topics,selected_tags:n.state.selected_tags,relevant:n.state.relevant,first_name:n.state.first_name,last_name:n.state.last_name,email_address:n.state.email_address,phone_number:n.state.phone_number,access_token:c}),e.disabled=!0,t.setState({working:!0}),k()("https://gwpadmin.codewrangler.io/api/gwp/v1/publish-whitepaper",{method:"post",body:a,headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){setTimeout((function(n){if(e.disabled=!1,JSON.stringify(a).includes("error"))return t.setState({error:a.message,working:!1}),!1;t.setState({active_tab:1,ID:"",title:"",authors:[""],format:"",publication_date:new Date,attachment_id:"",attachment_filename:"",content_link:"",agreed:!1,description:"",copyright_notice:"",image_id:"",image_filename:"",image_url:"",agency_specific:!0,agency_parent:0,agency_child:0,available_agencies:[],selected_topics:[],selected_tags:[],relevant:!1,first_name:"",last_name:"",email_address:"",phone_number:"",working:!1,error:!1},(function(){f.a.push("/profile")}))}),1e3)}))})),Object(p.a)(Object(l.a)(n),"_renderTabClass",(function(e){return n.state.active_tab==e?"".concat(T.a.tab," ").concat(T.a.open):"".concat(T.a.tab)})),Object(p.a)(Object(l.a)(n),"_renderRadioClass",(function(e){return n.state.agency_specific==e?"".concat(T.a.active):""})),Object(p.a)(Object(l.a)(n),"_renderAgencySelectorClass",(function(){return 1==n.state.agency_specific?"".concat(T.a.agencySelector," ").concat(T.a.active):"".concat(T.a.agencySelector)})),Object(p.a)(Object(l.a)(n),"_renderAgencySelector",(function(){if(!(n.state.available_agencies.length<1))return I("div",{className:"".concat(T.a.agencySelector," ").concat(T.a.active)},I("label",null,"Select Agency ",n._renderError("agency"),I("select",{onChange:n.handleChange,name:"agency"},I("option",{value:"0"},"All Agencies"),n.state.available_agencies.map((function(e){return I("option",{key:e.term_id,value:e.term_id},e.name)})))))})),Object(p.a)(Object(l.a)(n),"_renderControlIcon",(function(e){var t=n.state.active_tab;return I("img",t==e?{src:"/images/tab-active.svg"}:t>e?{src:"/images/tab-complete.svg"}:{src:"/images/tab-inactive.svg"})})),Object(p.a)(Object(l.a)(n),"_modalShowClass",(function(){return n.state.modal_open})),Object(p.a)(Object(l.a)(n),"_toggleTab",(function(e){var t=document.querySelector("#controls");if(event.preventDefault(),2==e){if(n.state.title.length<10){var a=document.querySelector('input[name="title"]');return n.setState({error:{title:"must be at least 60 characters"}}),a.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),!1}if(n.state.title.length>100){a=document.querySelector('input[name="title"]');return n.setState({error:{title:"The title can be no more than 100 characters."}}),a.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),!1}if(!n.state.format){var r=document.querySelector('select[name="format"]');return n.setState({error:{format:"Please select a format"}}),void r.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}if(n.state.authors.length<1){var s=document.querySelector('input[name="author"]');return n.setState({error:{authors:"Please input at least one author"}}),void s.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}if(!n.state.publication_date){var i=document.querySelector('input[name="publication_date"]');return n.setState({error:{publication_date:"Please select a publication date"}}),void i.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}if(!n.state.agreed)return void n.setState({error:{agreed:"You must agree to the terms to continue"}});if(!n.state.attachment_id&&!n.state.content_link)return void n.setState({error:{file:"You must upload a file or add a link to your content"}})}if(3==e&&n.state.description.length<100){var o=document.querySelector('textarea[name="description"]');return n.setState({error:{description:"must be at least 100 characters"}}),o.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),!1}if(4==e&&n.state.selected_topics.length<1){var c=document.querySelector('select[name="selected_topics"]');return n.setState({error:{topic:"Please select a topic."}}),c.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),!1}n._saveDraft(),n.setState((function(t){return{active_tab:e,error:!1}})),t.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})})),Object(p.a)(Object(l.a)(n),"_renderAuthorsBlock",(function(){var e=n.state.authors;return e.length<1?I("div",{key:"0",className:T.a.authorWrap},I("input",{onChange:n.handleChange,name:"author",ref:n.input,type:"text",placeholder:"Type author name"}),I("span",{onClick:function(){n._deleteAuthor(0)},className:T.a.deleteAuthor},I("img",{src:"/images/trash.svg"}))):I(_.a.Fragment,null,e.map((function(e,t){return I("div",{"data-index":n.state.authors[t],key:t,className:T.a.authorWrap},I("input",{onChange:function(e){return n.setAuthors(t,e)},name:"author",value:n.state.authors[t],type:"text",placeholder:"Type author name"}),I("span",{onClick:function(){n._deleteAuthor(t)},className:T.a.deleteAuthor},I("img",{src:"/images/trash.svg"})))})))})),Object(p.a)(Object(l.a)(n),"_addAuthor",(function(){var e=n.state.authors;n.state.authors.length>=10?n.setState({error:{authors:"Maximum of 10 authors"}}):(e.push(""),n.setState({authors:e}))})),Object(p.a)(Object(l.a)(n),"_getTaxonomyName",(function(e,t){var a=n.props[e].find((function(e){return e.term_id==t}));return Object(N.decodeHTML)(a.name)})),Object(p.a)(Object(l.a)(n),"_renderSelectedTopics",(function(){var e=n.state.selected_topics;return e.length<1?null:I(_.a.Fragment,null,e.map((function(e){return I("div",{key:e,className:T.a.selectedTopic},n._getTaxonomyName("topics",e),I("span",{onClick:function(){n.removeTopic(e)},className:T.a.close},I("img",{src:"/images/close-blue.svg",alt:""})))})))})),Object(p.a)(Object(l.a)(n),"_renderSelectedTags",(function(){var e=n.state.selected_tags;return e.length<1?null:I(_.a.Fragment,null,e.map((function(e){return I("div",{key:e,className:T.a.selectedTag},n._getTaxonomyName("tags",e),I("span",{onClick:function(){n.removeTag(e)},className:T.a.close},I("img",{src:"/images/close-blue.svg",alt:""})))})))})),Object(p.a)(Object(l.a)(n),"removeTopic",(function(e){var t=n.state.selected_topics,a=t.findIndex((function(t){return t==e}));-1!==a&&(t.splice(a,1),n.setState({selected_topics:t}))})),Object(p.a)(Object(l.a)(n),"removeTag",(function(e){var t=n.state.selected_tags,a=t.findIndex((function(t){return t==e}));-1!==a&&(t.splice(a,1),n.setState({selected_tags:t}))})),Object(p.a)(Object(l.a)(n),"_deleteAuthor",(function(e){var t=n.state.authors;t.splice(e,1),n.setState({authors:t})})),n.state={active_tab:1,ID:"",title:"",authors:[""],format:"",publication_date:new Date,attachment_id:"",attachment_filename:"",content_link:"",agreed:!1,description:"",copyright_notice:"",image_id:"",image_filename:"",image_url:"",agency_specific:!0,agency_parent:0,agency_child:0,available_agencies:[],selected_topics:[],selected_tags:[],first_name:"",last_name:"",email_address:"",phone_number:"",relevant:!1,working:!1,error:!1},n.handleChange=n.handleChange.bind(Object(l.a)(n)),n.setAuthors=n.setAuthors.bind(Object(l.a)(n)),n.input=_.a.createRef(),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,n,r,i,o,c,l,u,d,m,p,h;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.user){e.next=3;break}return f.a.push("/login"),e.abrupt("return",!1);case 3:return t=this.props.router.query.id,a=new S.a,e.next=7,a.fetchWhitepaper(t);case 7:if(n=e.sent,console.log(n),r=new Date(1e3*n.publication_date),this.props.user){e.next=14;break}return document.querySelector(".js-login").click(),e.abrupt("return",!1);case 14:return i=this.props.user.access_token,e.next=17,a.getUser(i);case 17:e.sent,o=n.file_url,c=o.substring(o.lastIndexOf("/")+1),l=Object(N.decodeHTML)(n.description),u=l.replace(/(<([^>]+)>)/gi,""),d="",m="","",n.featured_media&&(d=n.featured_media.file,m=n.featured_media.media_id,d.substring(d.lastIndexOf("/")+1)),p=new Array,n.topics.forEach((function(e){return p.push(e.term_id)})),h=new Array,n.tags.forEach((function(e){return h.push(e.term_id)})),this.setState((function(e){return{first_name:n.first_name,last_name:n.last_name,email_address:n.email_address,phone_number:n.phone_number,active_tab:1,ID:n.id,title:n.title,authors:n.authors,format:parseInt(n.format[0].term_id),publication_date:r,attachment_id:"",attachment_filename:c,content_link:n.content_link,agreed:!0,description:u,copyright_notice:n.copyright_notice,image_id:m,image_filename:"",image_url:d,agency_specific:!0,agency_parent:0,agency_child:0,available_agencies:[],selected_topics:p,selected_tags:h}}));case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=this.state.working,t=document.querySelector("html");e?t.classList.add("working"):t.classList.remove("working")}},{key:"isURL",value:function(e){return/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)}},{key:"setPublicationDate",value:function(e){console.log(e),this.setState({publication_date:e})}},{key:"triggerFileUpload",value:function(){document.querySelector("#pdf-upload").dispatchEvent(new Event("submit"))}},{key:"uploadPDFSubmit",value:function(e){e.preventDefault();var t=new FormData(e.target),a=this.props.user.access_token,n=this,r=t.get("pdf_file");if(t.append("token",a),!a)return!1;if(r.size>41943040)return this.setState({error:{file:"Selected file is larger than 40MB"}}),!1;if("application/pdf"!==r.type)return this.setState({error:{file:"Unsupported file type. Please select a PDF."}}),!1;n.setState({working:!0});var s=e.target.action;k()(s,{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){if(JSON.stringify(e).includes("error"))return n.setState({error:{file:"The selected file could not be uploaded. Please contact support for assistance."},working:!1}),!1;n.setState({attachment_id:e,attachment_filename:r.name,content_link:"",working:!1})}))}},{key:"triggerImageUpload",value:function(){document.querySelector("#image-upload").dispatchEvent(new Event("submit"))}},{key:"uploadImageSubmit",value:function(e){e.preventDefault();var t=new FormData(e.target),a=this.props.user.access_token,n=this,r=t.get("image_file");if(t.append("token",a),t.append("ID",this.state.ID),!a)return!1;if(r.size>10048576)return this.setState({error:{image:"Selected file is larger than 10MB"}}),!1;if(!r.type.match(/image-*/))return this.setState({error:{image:"Unsupported file type. Please select a JPG or PNG."}}),!1;n.setState({working:!0});var s=e.target.action;k()(s,{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){if(JSON.stringify(e).includes("error"))return n.setState({error:{image:"The selected file could not be uploaded. There may be something wrong with your image. Please contact support for assistance."},working:!1}),!1;n.setState({image_id:e.ID,image_filename:r.name,image_url:e.url,working:!1})}))}},{key:"setAuthors",value:function(e,t){var a=this.state.authors;a[e]=t.target.value,this.setState({authors:a})}},{key:"handleChange",value:function(){var e=Object(i.a)(s.a.mark((function e(t){var a,n,r,i,o,c,l,u,d,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("select_topic"!=(a=t.target.getAttribute("name"))){e.next=15;break}if(0!=(n=t.target.value)){e.next=5;break}return e.abrupt("return");case 5:if(r=this.state.selected_topics,!(this.state.selected_topics.length>=2)){e.next=8;break}return e.abrupt("return");case 8:i=this.props.topics.find((function(e){return e.term_id==n})),-1===r.findIndex((function(e){return e==n}))&&(r.push(i.term_id),this.setState({selected_topics:r})),document.querySelector('select[name="select_topic"]').selectedIndex=0,e.next=55;break;case 15:if("select_tag"!=a){e.next=29;break}if(0!=(o=t.target.value)){e.next=19;break}return e.abrupt("return");case 19:if(c=this.state.selected_tags,!(this.state.selected_tags.length>=5)){e.next=22;break}return e.abrupt("return");case 22:l=this.props.tags.find((function(e){return e.term_id==o})),-1===c.findIndex((function(e){return e==o}))&&(c.push(l.term_id),this.setState({selected_tags:c})),document.querySelector('select[name="select_tag"]').selectedIndex=0,e.next=55;break;case 29:if("agreed"!=a){e.next=33;break}this.setState(Object(p.a)({},a,!this.state.agreed)),e.next=55;break;case 33:if("content_link"!=a){e.next=37;break}(this.isURL(t.target.value)||""==t.target.value)&&this.setState({attachment_id:"",attachment_filename:"",content_link:t.target.value}),e.next=55;break;case 37:if("agency_specific"!=a){e.next=41;break}this.setState(Object(p.a)({},a,!this.state.agency_specific)),e.next=55;break;case 41:if("focus"!=a){e.next=54;break}if(u=t.target.value,0!=parseInt(u)){e.next=47;break}d="",e.next=51;break;case 47:return m=new S.a,e.next=50,m.fetchAgencies(u);case 50:d=e.sent;case 51:this.setState({agency_parent:u,available_agencies:d}),e.next=55;break;case 54:"agency"==a?this.setState({agency_child:t.target.value}):"relevant"==a?this.setState(Object(p.a)({},a,!this.state.relevant)):this.setState(Object(p.a)({},a,t.target.value),(function(){}));case 55:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_renderError",value:function(e){if(this.state.error){var t=JSON.stringify(this.state.error);if(t.includes("title")&&"title"==e)return I("span",{className:"".concat(T.a.errorText)},this.state.error.title);if(t.includes("format")&&"format"==e)return I("span",{className:"".concat(T.a.errorText)},this.state.error.format);if(t.includes("authors")&&"authors"==e)return I("span",{className:"".concat(T.a.errorText)},this.state.error.authors);if(t.includes("publication_date")&&"publication_date"==e)return I("span",{className:"".concat(T.a.errorText)},this.state.error.publication_date);if(t.includes("file")&&"file"==e)return I("span",{className:"".concat(T.a.errorText)},this.state.error.file);if(t.includes("description")&&"description"==e)return I("span",{className:"".concat(T.a.errorText)},this.state.error.description);if(t.includes("agreed")&&"agreed"==e)return I(_.a.Fragment,null,I("br",null),I("span",{className:"".concat(T.a.errorText)},this.state.error.agreed));if(t.includes("image")&&"image"==e)return I("span",{className:"".concat(T.a.errorText)},this.state.error.image);if(t.includes("topic")&&"topic"==e)return I(_.a.Fragment,null,I("span",{className:"".concat(T.a.errorText)},this.state.error.topic));if(t.includes("first_name")&&"first_name"==e)return I(_.a.Fragment,null,I("span",{className:"".concat(T.a.errorText)},this.state.error.first_name));if(t.includes("last_name")&&"last_name"==e)return I(_.a.Fragment,null,I("span",{className:"".concat(T.a.errorText)},this.state.error.last_name));if(t.includes("email_address")&&"email_address"==e)return I(_.a.Fragment,null,I("span",{className:"".concat(T.a.errorText)},this.state.error.email_address));if(t.includes("phone_number")&&"phone_number"==e)return I(_.a.Fragment,null,I("span",{className:"".concat(T.a.errorText)},this.state.error.phone_number))}}},{key:"_renderAttachmentFilename",value:function(){if(""!=this.state.attachment_filename)return I("span",{className:"".concat(T.a.attachmentFilename)},this.state.attachment_filename)}},{key:"_renderImageFilename",value:function(){if(""!=this.state.image_filename)return I("span",{className:"".concat(T.a.attachmentFilename)},this.state.image_filename)}},{key:"_renderImagePreview",value:function(){if(""!=this.state.image_url)return I("img",{src:this.state.image_url})}},{key:"render",value:function(){var e=this,t=this.props.display_name,a=this.props.user,r=this.props.formats,s=this.props.agencies,i=(this.state.available_agencies.available_agencies,this.props.topics),o=this.props.tags;return I(_.a.Fragment,null,I(v.a,null,I("title",{key:"page-title"},"Edit Whitepaper"),I("meta",{charset:"utf-8"}),I("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/apple-touch-icon.png"}),I("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon-32x32.png"}),I("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon-16x16.png"}),I("meta",{name:"msapplication-TileImage",content:"/favicon-270x270.png"}),I("meta",{name:"msapplication-TileColor",content:"#ffffff"}),I("link",{rel:"manifest",href:"/site.webmanifest"})),I(w.a,Object(n.a)({},a,{display_name:t})),I("div",{className:"row ".concat(T.a.pageHeader," text-center")},I("div",{className:"small-12 columns"},I("h1",null,"Edit Whitepaper"),I("img",{className:T.a.hr,src:"/images/sep.svg",alt:""}))),I("div",{className:"row ".concat(T.a.pageContent)},I("div",{className:"small-12 columns"},I("div",{id:"controls",className:T.a.controls},I("ul",null,I("li",{className:T.a.active,onClick:function(){e._toggleTab(1)}},I("div",{className:T.a.icon},this._renderControlIcon(1)),I("span",null,"Main")),I("li",{onClick:function(){e._toggleTab(2)}},I("div",{className:T.a.icon},this._renderControlIcon(2)),I("span",null,"Description")),I("li",{onClick:function(){e._toggleTab(3)}},I("div",{className:T.a.icon},this._renderControlIcon(3)),I("span",null,"Information")),I("li",{onClick:function(){e._toggleTab(4)}},I("div",{className:T.a.icon},this._renderControlIcon(4)),I("span",null,"Publication")))),I("div",{className:T.a.tabs},I("div",{className:this._renderTabClass(1)},I("div",{className:"".concat(T.a.form)},I("div",{className:"row ".concat(T.a.row)},I("div",{className:"small-12 columns"},I("label",null,"Title",this._renderError("title"),I("input",{onChange:this.handleChange,name:"title",value:this.state.title,type:"text",placeholder:"Type your title of your content"})),I("label",null,"Format",this._renderError("format"),I("select",{value:this.state.format,onChange:this.handleChange,name:"format"},I("option",null,"Select Format"),r.map((function(e){return I("option",{key:e.term_id,value:e.term_id},e.name)})))),I("label",null,"Authors",this._renderError("authors"),I("span",{className:T.a.subLabel},I("span",{className:T.a.dot},"\xb7")," up to 10"),I("div",{className:T.a.authorBlock},this._renderAuthorsBlock())),I("div",{onClick:function(){e._addAuthor()},className:T.a.addAuthor},I("span",null,I("img",{src:"/images/add-author.svg"})),I("h5",null,"Add Author")),I("label",null,"Publish Date ",I("img",{className:T.a.question,src:"/images/question.png"})," ",this._renderError("publication_date"),I("div",{className:T.a.dateBlock},I(j.a,{selected:this.state.publication_date,onChange:function(t){e.setPublicationDate(t)}}),I("span",{className:T.a.cal},I("img",{src:"/images/calendar.svg"})))),I("label",null,"Upload Your File ",this._renderError("file"),I("div",{className:T.a.addFile},I("form",{id:"pdf-upload",action:"https://gwpadmin.codewrangler.io/api/gwp/v1/upload-pdf",onSubmit:function(t){return e.uploadPDFSubmit(t)},method:"post",encType:"multipart/form-data"},I("input",{onChange:this.triggerFileUpload,name:"pdf_file",type:"file",accept:"application/pdf"}),I("span",null,I("img",{src:"/images/upload.svg"})),I("h5",null,"Upload Content")),this._renderAttachmentFilename())),I("div",{className:T.a.agree},I("label",{className:T.a.label}," I give GovWhitePapers permission to post this content.",I("input",{type:"checkbox",onChange:this.handleChange,name:"agreed",checked:this.state.agreed,value:this.state.agreed}),I("span",{className:T.a.checkmark}),this._renderError("agreed"))),I("div",{className:T.a.externalLink},I("div",{className:T.a.line},I("hr",null),I("span",null,"or add external link")),I("label",null,"Link to Content",I("input",{type:"url",onChange:this.handleChange,name:"content_link",checked:this.state.content_link,value:this.state.content_link,placeholder:"External Link"}))),I("div",{className:T.a.nav},I("button",{onClick:function(){e._toggleTab(2)},className:"button ".concat(T.a.button)},"Save and Continue")))))),I("div",{className:this._renderTabClass(2)},I("div",{className:"".concat(T.a.form)},I("div",{className:"row ".concat(T.a.row)},I("div",{className:"small-12 columns"},I("label",null,"Description ",this._renderError("description"),I("textarea",{onChange:this.handleChange,name:"description",value:this.state.description,placeholder:"Add a description...",rows:"5"})),I("label",null,"Copyright Notice",I("span",{className:T.a.subLabel},I("span",{className:T.a.dot},"\xb7")," optional"),I("div",{className:T.a.copyright},I("input",{onChange:this.handleChange,name:"copyright_notice",value:this.state.copyright_notice,type:"text",placeholder:"Copyright text"}),I("span",null,"\xa9"))),I("label",null,I("div",{className:T.a.addPhoto},I("form",{id:"image-upload",action:"https://gwpadmin.codewrangler.io/api/gwp/v1/upload-whitepaper-image",onSubmit:function(t){return e.uploadImageSubmit(t)},method:"post",encType:"multipart/form-data"},I("input",{onChange:this.triggerImageUpload,name:"image_file",type:"file",accept:"image/jpeg,image/png"}),I("span",null,I("img",{src:"/images/upload-large.svg"})),I("h3",null,"Upload Photo"),I("p",null,"Max size 10MB; minimum 300 pixels. Recommended size: 600x500 pixels")),this._renderImageFilename(),this._renderError("image"))),I("div",{className:T.a.imagePreview},this._renderImagePreview()),I("div",{className:T.a.nav},I("button",{onClick:function(){e._toggleTab(3)},className:"button ".concat(T.a.button)},"Save and Continue")))))),I("div",{className:this._renderTabClass(3)},I("div",{className:"".concat(T.a.form)},I("div",{className:"row ".concat(T.a.row)},I("div",{className:"small-12 columns"},I("div",{className:T.a.agency},I("p",null,"Is your content government agency or state and local specific?"),I("ul",{className:T.a.agencyTypeSelector},I("li",{className:this._renderRadioClass(!0)},I("label",{className:"button ".concat(T.a.button)},I("input",{onChange:this.handleChange,type:"radio",value:"1",name:"agency_specific",checked:!0===this.state.agency_specific}),"Yes, it's specific")),I("li",{className:this._renderRadioClass(!1)},I("label",{className:"button ".concat(T.a.button)},I("input",{onChange:this.handleChange,type:"radio",value:"0",name:"agency_specific",checked:!1===this.state.agency_specific}),"No, it's not specific"))),I("div",{className:this._renderAgencySelectorClass()},I("label",null,"Audience Focus ",this._renderError("focus"),I("select",{onChange:this.handleChange,name:"focus"},I("option",{value:"0"},"Select Focus"),s.map((function(e){return I("option",{key:e.term_id,value:e.term_id},Object(N.decodeHTML)(e.name))})))),this._renderAgencySelector())),I("div",{className:T.a.topics},I("label",null,"Topics ",this._renderError("topic"),I("span",{className:T.a.subLabel},I("span",{className:T.a.dot},"\xb7")," up to 2"),I("select",{onChange:this.handleChange,name:"select_topic"},I("option",{value:"0"},"Select Interests"),i.map((function(e){return I("option",{key:e.term_id,value:e.term_id},Object(N.decodeHTML)(e.name))})))),this._renderSelectedTopics()),I("div",{className:T.a.tags},I("label",null,"Tags ",this._renderError("tag"),I("span",{className:T.a.subLabel},I("span",{className:T.a.dot},"\xb7")," up to 5"),I("select",{onChange:this.handleChange,name:"select_tag"},I("option",{value:"0"},"Select Tags"),o.map((function(e){return I("option",{key:e.term_id,value:e.term_id},Object(N.decodeHTML)(e.name))})))),this._renderSelectedTags()),I("div",{className:T.a.relevant},I("label",{className:T.a.label}," This content is relevant to the government/military community.",I("input",{type:"checkbox",onChange:this.handleChange,name:"relevant",checked:this.state.relevant,value:this.state.relevant}),I("span",{className:T.a.checkmark}),this._renderError("relevant"))),I("div",{className:T.a.nav},I("button",{onClick:function(){e._toggleTab(4)},className:"button ".concat(T.a.button)},"Save and Continue")))))),I("div",{className:this._renderTabClass(4)},I("div",{className:"".concat(T.a.form)},I("div",{className:"row ".concat(T.a.row)},I("div",{className:"small-12 columns"},I("div",{className:T.a.publication},I("label",null,"First Name ",this._renderError("first_name"),I("input",{onChange:this.handleChange,name:"first_name",value:this.state.first_name,type:"text",placeholder:""})),I("label",null,"Last Name ",this._renderError("last_name"),I("input",{onChange:this.handleChange,name:"last_name",value:this.state.last_name,type:"text",placeholder:""})),I("label",null,"Email ",this._renderError("email_address"),I("input",{onChange:this.handleChange,name:"email_address",value:this.state.email_address,type:"email",placeholder:""})),I("label",null,"Phone ",this._renderError("phone_number"),I("input",{onChange:this.handleChange,name:"phone_number",value:this.state.phone_number,type:"text",placeholder:""}))),I("div",{className:T.a.nav},I("button",{onClick:this._handlePublish,className:"js-publish button ".concat(T.a.button)},"Publish"))))))))),I(x.a,null))}}],[{key:"getInitialProps",value:function(){var e=Object(i.a)(s.a.mark((function e(t){var a,n,r,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new S.a,e.next=3,a.fetchFormats();case 3:return n=e.sent,e.next=6,a.fetchTopics();case 6:return r=e.sent,e.next=9,a.fetchTags();case 9:return i=e.sent,0,e.next=13,a.fetchAgencies(0);case 13:return o=e.sent,e.abrupt("return",{formats:n,agencies:o,topics:r,tags:i});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),a}(_.a.Component);t.default=Object(g.withRouter)(P)}},[["oFpz",0,2,1,3,4,5,7,13]]]);